
<form class="form-horizontal" #newApartmentForm="ngForm">

	<!-- Apartment title section -->
	<div class="panel panel-common">
		<div class="panel-footer">Apartment Details</div>
		<div class="panel-body"></div>
		<div class="form-group">
			<label for="inputTitle" class="col-sm-2 control-label">Poster
				Title</label>

			<div class="col-sm-4">
				<input type="text" class="form-control" id="inputTitle" placeholder="Title" 
				[(ngModel)]="model.Title" maxlength="20" pattern="[a-zA-Z0-9 ]{0,20}" name="Title" #Title="ngModel">
				<div *ngIf="Title.errors && (Title.dirty || Title.touched)"
					class="alert alert-danger">Title can contain only letters and
					digits</div>
			</div>
		</div>
	</div>

	<div class="panel panel-common">
		<div class="panel-footer">Adress</div>
		<div class="panel-body">
		
			<!-- City input/Validation -->
			<div class="form-group">
				<label for="inputCity" class="col-sm-2 control-label">City</label>
				<div class="col-sm-10">
					<input type="text" class="form-control" id="inputCity"
						placeholder="City" [(ngModel)]="model.City" minlength="3" maxlength="20"
						pattern="[a-zA-Z]{3,50}"  name="City" #City="ngModel">
					<div *ngIf="City.errors && (City.dirty || City.touched)"
						class="alert alert-danger">City should be 3 to 50 characters long, and contain only characters.
					</div>
				</div>
			</div>
			
			<!-- District input validation -->
			<div class="form-group">
				<label for="inputDistrict" class="col-sm-2 control-label">District</label>
				<div class="col-sm-10">
					<input type="text" class="form-control" id="inputDistrict" placeholder="District"
					[(ngModel)]="model.District" maxlength="50" pattern="[a-zA-Z]{0,50}" name="District" #District="ngModel">
					<div *ngIf="District.errors && (District.dirty || District.touched)"
						class="alert alert-danger">District should maximum 50 characters long, and contain only characters.
					</div>
				</div>
			</div>
			
			<!-- Street input validation -->
			<div class="form-group">
				<label for="inputStreet" class="col-sm-2 control-label">Street</label>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="inputStreet" placeholder="Street"
					[(ngModel)]="model.Street" maxlength="50" pattern="[a-zA-Z]{0,50}" required name="Street" #Street="ngModel">
					<div *ngIf="Street.errors && (Street.dirty || Street.touched)"
						class="alert alert-danger">Street should be 3 to 50 characters long, and contain only characters.
					</div>
				</div>
				
				<!-- Building number -->
				<label for="inputBuildingNumber" class="col-sm-1 control-label">Building</label>
				<div class="col-sm-2">
					<input type="text" class="form-control" id="inputBuildingNumber" placeholder="Building Number" maxlength="5"
					[(ngModel)]="model.StreetNumber" required pattern="[0-9]{0,4}[a-zA-Z]?" required name="BuildingNumber" #BuildingNumber="ngModel">
					<div *ngIf="BuildingNumber.errors && (BuildingNumber.dirty || BuildingNumber.touched)"
						class="alert alert-danger">Building number should be digit or digit with letter at the end.
					</div>
				</div>
				<!-- Floor -->
				<label for="inputFloorNumber" class="col-sm-1 control-label">Floor</label>
				<div class="col-sm-2">
					<input type="text" class="form-control" id="inputFloorNumber" placeholder="Floor" maxlength="3" required
					[(ngModel)]="model.FloorNumber" pattern="[1-9]{0,3}" name="Floor" #Floor="ngModel">
					<div *ngIf="Floor.errors && (Floor.dirty || Floor.touched)"
						class="alert alert-danger">Floor number is required and should be digit staring from 1.
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="panel panel-common">
		<div class="panel-footer">Apartment Details</div>
		<div class="panel-body">
		
			<div class="form-group">
				<!-- Bedroom count -->
				<label for="inputBedroomCount" class="col-sm-2 control-label">Bedrooms</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="inputBedroomCount" placeholder="Bedrooms" maxlength="2"
					[(ngModel)]="model.BedroomCount" pattern="1?[0-9]" name="Bedrooms" #Bedrooms="ngModel">
					<div *ngIf="Bedrooms.errors && (Bedrooms.dirty || Bedrooms.touched)"
						class="alert alert-danger">Bedroom count is digit less than 20.
					</div>
				</div>
				<!-- Number persons -->
				<label for="inputSleepingPlaces" class="col-sm-2 control-label">Persons</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="inputSleepingPlaces" placeholder="Persons number" maxlength="2"
					[(ngModel)]="model.SleepingPlaces" pattern="1?[0-9]" name="SleepingPlaces" #SleepingPlaces="ngModel">
					<div *ngIf="SleepingPlaces.errors && (SleepingPlaces.dirty || SleepingPlaces.touched)"
						class="alert alert-danger">Visitors count is digit less than 20.
					</div>
				</div>
			</div>

			<div class="form-group">
				<label for="inputSquare" class="col-sm-2 control-label">Square</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="inputSquare" placeholder="Square" maxlength="3"
					[(ngModel)]="model.Square" pattern="(^[5-9]$)|([0-9]{2,3})" name="Square" #Square="ngModel">
					<div *ngIf="Square.errors && (Square.dirty || Square.touched)"
						class="alert alert-danger">Apartment square isdigit from 5 to 500 square meeters.
					</div>
				</div>
			</div>

			<div class="form-group">
				<label for="inputDescription" class="col-sm-2 control-label">Short
					Description</label>
				<div class="col-sm-10">
					<textarea class="form-control" rows="4" maxlength="500" [(ngModel)]="model.Description" name="Description" #Description="ngModel"></textarea>
				</div>
			</div>
		</div>
	</div>

	<!-- List of tags -->
	<div class="panel panel-common">
		<div class="panel-footer">Tags</div>
		<div class="panel-body">
			<div class="apartment-tag-list"
				*ngFor="let tag of this._apartmentService.tagList"
				style="display: inline-block; margin: 5px;">
				<button class="btn"
					style="border: 1px solid; max-width: 150px; padding: 5px;"
					(click)="tag.isSelected=!tag.isSelected; tagClick(tag)"
					[ngClass]="tag.isSelected ? 'btn-primary':'btn-default'">
					<span class="glyphicon glyphicon" aria-hidden="true"
						[ngClass]="tag.isSelected ? 'glyphicon-check':'glyphicon-unchecked'"></span>
					{{tag.tagname}}
				</button>
			</div>
		</div>
	</div>
	<!-- Price -->
		<div class="panel panel-common">
		<div class="panel-footer">Price</div>
		<div class="panel-body">
			<div class="form-group">
				<label for="inputPrice" class="col-sm-2 control-label">Price</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="inputPrice" placeholder="Price" minlength="1" maxlength="10" required
					[(ngModel)]="model.Price" pattern="[0-9]{1,10}" name="Price" #Price="ngModel">
					<div *ngIf="Price.errors && (Price.dirty || Price.touched)"
						class="alert alert-danger">Price should be digit from.
					</div>
				</div>
			</div>
		</div>
	</div>
</form>
<div *ngIf="!isApartmentCreated"
	class="alert alert-danger">Apartment Was not created
</div>

<div *ngIf="apartmentId > 0">
<image-upload
  [max]="10"
  [url]="imageURL()"
  [headers]="[]"
  [buttonCaption]="'Select Images!'"
  [dropBoxMessage]="'Drop your images here!'"
  (onFileUploadFinish)="imageUploaded($event)"
  (onRemove)="imageRemoved($event)"
  (isPending)="disableSendButton($event)"
></image-upload>
</div>


<div class="row text-center" style="margin-top: 15px">
	<button class="btn btn-primary" [disabled]="!newApartmentForm.form.valid || apartmentId > 0" (click)="this.createApartment()">Create</button>
</div>































